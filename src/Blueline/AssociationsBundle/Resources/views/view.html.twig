{% extends chromeless ? 'BluelineBundle::base.chromeless.html.twig': 'BluelineBundle::base.html.twig' %}

{% block title %}{{ association.name }} | Associations | {{ parent() }}{% endblock %}

{% block og_title %}{{ association.name }}{% endblock %}
{% block og_description %}Information about {{ association.name }}, a bellringing association covering {{ count( association.towers ) }} tower{{ count( association.towers ) > 1? 's' : '' }}.{% endblock %}

{% set breadcrumb = { 'title': 'Associations', 'href': path('Blueline_Associations_welcome') } %}

{% set search = false %}

{% block body %}
{% from 'BluelineBundle:Macros:header.html.twig' import header %}
	<section class="association">
		{{ header( association.name, null, { 'id': 'association_tabBar', 'tabs': [
			{ 'title': 'Details', 'content': 'association_details' },
			{ 'title': 'Towers', 'content': 'association_towers' }
		], 'active': 0 } ) }}
		<div id="association_details" class="details">
			<noscript><h2>Details</h2></noscript>
			<dl>
			{% if association.link is not empty %}
				<dt>Link</dt>
				<dd><a href="{{ association.link }}" class="external">{{ association.link }}</a></dd>
			{% endif %}
				<dt>Towers</dt>
				<dd>{{ count( association.towers ) }}</dd>
			</dl>
			{% if enclaved is not empty %}
			<h3>Enclaved Associations</h3>
			<ol>
				{% for association2 in enclaved %}
					<li><a href="{{ path( 'Blueline_Associations_view', {'id':association2.id} ) }}">{{ association2.name }}</a></li>
				{% else %}
					<li class="none">None</li>
				{% endfor %}
			</ol>
			{% endif %}
			<h3>Data Source and Copyright</h3>
			<dl><dd>Details on the <a href="{{ path( 'Blueline_Pages_view', { 'page': 'about' } ) }}">about page</a>.<dd></dl>
		</div>
		<div id="association_towers" class="affiliations">
			<noscript><h2>Affiliated Towers</h2></noscript>
			<ol>
			{% for tower in association.towers %}
				<li><a href="{{ path( 'Blueline_Towers_view', { 'id': tower.id } ) }}">{{ tower.place }} <small> ({{ tower.dedication }})</small></a></li>
			{% else %}
				<li class="none">None</li>
			{% endfor %}
			</ol>
		</div>
	</section>
	<div class="Map" data-set="{{ {
		fitBounds: [bbox.min_lat,bbox.min_lon,bbox.max_lat,bbox.max_lon],
		fusionTableQuery: "affiliations contains '"~association.id|e('js')~"'"
	}|json_encode() }}"></div>
{% endblock %}
