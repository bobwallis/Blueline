#!/bin/bash

dWhich=`which "$0"`
d=`dirname "$dWhich"`

# Execute RequireJS builder
node "$d/helpers/r.js" -o app.build.js

# JS
# Remove unneeded files
rm -rf "$d/../../www-build/scripts/helpers"
rm -rf "$d/../../www-build/scripts/plugins"
rm "$d/../../www-build/scripts/ui/Hotkeys.js"
rm "$d/../../www-build/scripts/ui/Content.js"
rm "$d/../../www-build/scripts/ui/Header.js"
rm "$d/../../www-build/scripts/ui/MethodGrid.js"
rm "$d/../../www-build/scripts/ui/Page.js"
rm "$d/../../www-build/scripts/ui/TabBar.js"
# Copy to scripts.built
rm -rf "$d/../../web/scripts.built"
mv "$d/../../www-build/scripts" "$d/../../web/scripts.built"


# Remove www-build directory
rm -rf "$d/../../www-build"
